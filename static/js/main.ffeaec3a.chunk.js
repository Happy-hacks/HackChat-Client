(this.webpackJsonphackchat=this.webpackJsonphackchat||[]).push([[0],{100:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(42),o=n.n(r),i=(n(52),n(6)),s=n(1),l=(n(53),n(43)),u=n.n(l),m=n(4),d=(n(86),n(5)),f=(n(87),function(e){var t=e.title,n=e.icon;return c.a.createElement("div",{className:"menu__link"},c.a.createElement("label",null,t),c.a.createElement("img",{src:n,alt:"".concat(t," icon")}))}),h=function(){var e=Object(a.useContext)(A);return c.a.createElement("div",{className:"navigation__menu"},c.a.createElement("div",{className:"menu__navigation"},c.a.createElement("button",{onClick:function(){return e.config.hideMenu()}},"Hide")),c.a.createElement("h2",null,"menu"),c.a.createElement("div",{className:"menu__links"},c.a.createElement(m.b,{to:{pathname:"/",state:{authenticated:!0}},onClick:function(){return e.config.hideMenu()}},c.a.createElement(f,{title:"Chat",icon:void 0})),c.a.createElement(m.b,{to:"/preferences",onClick:function(){return e.config.hideMenu()}},c.a.createElement(f,{title:"Preferences",icon:void 0})),c.a.createElement(m.b,{to:"/login",onClick:function(){return e.auth.signOut()}},c.a.createElement(f,{title:"Sign out",icon:void 0}))))},g=function(e){var t=e.redirectBack;return c.a.createElement("svg",{width:"20",height:"20",viewBox:"0 0 260 260",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:function(){return t()}},c.a.createElement("line",{x1:"139",y1:"129.787",x2:"227.787",y2:"41",stroke:"#D7E0E9",strokeWidth:"30",strokeLinecap:"round"}),c.a.createElement("line",{x1:"29",y1:"129.787",x2:"117.787",y2:"41",stroke:"#D7E0E9",strokeWidth:"30",strokeLinecap:"round"}),c.a.createElement("line",{x1:"15",y1:"-15",x2:"140.563",y2:"-15",transform:"matrix(0.707107 0.707107 0.707107 -0.707107 139 110)",stroke:"#D7E0E9",strokeWidth:"30",strokeLinecap:"round"}),c.a.createElement("line",{x1:"15",y1:"-15",x2:"140.563",y2:"-15",transform:"matrix(0.707107 0.707107 0.707107 -0.707107 29 110)",stroke:"#D7E0E9",strokeWidth:"30",strokeLinecap:"round"}))},E=function(e){var t=e.showMenu;return c.a.createElement("svg",{width:"20",height:"20",viewBox:"0 0 260 260",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:function(){return t()}},c.a.createElement("line",{x1:"20",y1:"85",x2:"240",y2:"85",stroke:"#D7E0E9",strokeWidth:"30",strokeLinecap:"round"}),c.a.createElement("line",{x1:"70",y1:"185",x2:"240",y2:"185",stroke:"#D7E0E9",strokeWidth:"30",strokeLinecap:"round"}))},p=function(){var e=Object(a.useContext)(A);if("/login"===Object(d.g)().pathname)return c.a.createElement("div",{className:"app__navigation"});return e.config.menu?c.a.createElement(h,null):c.a.createElement("div",{className:"app__navigation"},c.a.createElement(g,{redirectBack:function(){return console.log("redirect back")}}),c.a.createElement(E,{showMenu:function(){return e.config.showMenu()}}))},k=(n(92),n(93),function(e){var t=e.handle,n=e.message;return c.a.createElement("div",{className:"output__message received-message"},t&&c.a.createElement("h2",null,t),c.a.createElement("pre",null,n))}),b=function(e){var t=e.message;return c.a.createElement("div",{className:"output__message forwarded-message"},c.a.createElement("pre",null,t))},y=function(e){var t=e.error,n=e.message;return c.a.createElement("div",{className:"output__message error-message"},t&&c.a.createElement("h2",null,t),c.a.createElement("pre",null,n))},v=function(e){var t=e.content,n=e.socketId,r=Object(a.useRef)(null),o="",i=t.map((function(e,t){var a=e.handle,r=e.message,i=e.id,s=e.error,l=!(a===o||s===o);return o=s||a,s?c.a.createElement(y,{key:t,message:r,error:l?s:void 0}):n===i?c.a.createElement(b,{key:t,message:r}):c.a.createElement(k,{key:t,handle:l?a:void 0,message:r})}));return Object(a.useEffect)((function(){r.current.scrollIntoView({behavior:"smooth"})}),[t]),c.a.createElement("div",{className:"chat-window"},c.a.createElement("div",{className:"chat-window__output"},i),c.a.createElement("div",{ref:r}))},j=(n(94),function(e){var t=e.feedback;return t?c.a.createElement("span",{className:"message-toolbar__feedback"},t," is typing a message..."):c.a.createElement("span",{className:"message-toolbar__feedback"})}),O=n(25),_=n.n(O),w=n(46),x="http://localhost:4000",N={SOCKET_HOST:x,API:{LOGIN:"".concat(x,"/authenticate")}},C=function(e){var t=e.handleError,n=Object(a.useState)(""),r=Object(s.a)(n,2),o=r[0],i=r[1],l=Object(a.useState)(""),u=Object(s.a)(l,2),m=u[0],f=u[1],h=Object(a.useContext)(A),g=function(e){"handle"===e.target.name?i(e.target.value):"password"===e.target.name&&f(e.target.value)},E={error:"Authentication Error",message:"No access for this Username and Password"},p={error:"Input Error",message:"Username and Password are required"},k=function(){var e=Object(w.a)(_.a.mark((function e(n){var a,c,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),o&&m||t(p),!o||m){e.next=6;break}return e.abrupt("return",n.target.form.password.focus());case 6:if(o||!m){e.next=8;break}return e.abrupt("return",n.target.form.handle.focus());case 8:return a=function(e){return{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}},e.next=11,fetch(N.API.LOGIN,a({handle:o,password:m}));case 11:return c=e.sent,e.next=14,c.json();case 14:if(!(r=e.sent).error){e.next=19;break}return e.abrupt("return",t(E));case 19:h.auth.signIn(r.handle);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return h.auth.authenticated?c.a.createElement(d.a,{to:"/"}):c.a.createElement("form",{className:"login__form"},c.a.createElement("input",{className:"login__handle",placeholder:"handle",name:"handle",autoFocus:!0,onChange:function(e){return g(e)}}),c.a.createElement("input",{className:"login__password",placeholder:"password",type:"password",name:"password",onChange:function(e){return g(e)},value:m}),c.a.createElement("input",{className:"login__submit",type:"submit",value:"\u27a4",onClick:function(e){return k(e)}}))},S=[{message:"Type our credentials and access the features",feedbackDelay:15e3,responseDelay:3e3},{message:"You see those input felids?...\n\tType your username and password instead of waiting\ud83d\ude03",feedbackDelay:15e3,responseDelay:3e3},{message:"What can you share and yet keep at the same time?\ud83e\udd14",feedbackDelay:15e3,responseDelay:3e3},{message:"...A STD.\ud83d\ude10",feedbackDelay:4e3,responseDelay:2e3}],D=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(0),l=Object(s.a)(o,2),u=l[0],m=l[1],d=Object(a.useState)([{handle:"HackChat",message:"Welcome to HackChat...",id:"HackChat"}]),f=Object(s.a)(d,2),h=f[0],g=f[1];return Object(a.useEffect)((function(){var e=function(){var e,t=S[u].message,n=S[u].feedbackDelay,a=S[u].responseDelay;return[setTimeout((function(){r("HackChat"),e=setTimeout((function(){g((function(e){return[].concat(Object(i.a)(e),[{message:t,handle:"HackChat",id:"HackChat"}])})),r("")}),a),m(u===S.length-1?0:u+1)}),n),e]}(),t=Object(s.a)(e,2),n=t[0],a=t[1];return function(){clearInterval(n),clearInterval(a)}})),c.a.createElement("div",{className:"login"},c.a.createElement("h2",null,"HackChat"),c.a.createElement(v,{content:h}),c.a.createElement(j,{feedback:n}),c.a.createElement(C,{handleError:function(e){g((function(t){return[].concat(Object(i.a)(t),[e])}))}}))},I=(n(96),n(97),function(e){var t=Object.keys(T).map((function(e){return T[e].code})),n=new RegExp("(\\".concat(t.join("|\\"),")"),"g");return e.replace(n,(function(e,t){return T[t].icon}))}),T={":)":{code:":\\)",icon:"\ud83d\ude42",category:"smiley"},":D":{code:":D",icon:"\ud83d\ude03",category:"smiley"},xD:{code:"xD",icon:"\ud83d\ude06",category:"smiley"},":(":{code:":\\(",icon:"\ud83d\ude41",category:"smiley"},";(":{code:";\\(",icon:"\ud83d\ude09",category:"smiley"},";I":{code:";I",icon:"\ud83e\udd28",category:"smiley"},":I":{code:":I",icon:"\ud83d\ude10",category:"smiley"},":o":{code:":o",icon:"\ud83d\ude2e",category:"smiley"},":O":{code:":O",icon:"\ud83d\ude31",category:"smiley"},":L":{code:":L",icon:"\ud83e\udd14",category:"smiley"},":P":{code:":P",icon:"\ud83d\ude1b",category:"smiley"},";P":{code:";P",icon:"\ud83d\ude1c",category:"smiley"},xP:{code:"xP",icon:"\ud83d\ude1d",category:"smiley"},"x=":{code:"x\\=",icon:"\ud83e\udd2e",category:"smiley"},"\\like":{code:"\\like",icon:"\ud83d\udc4d",category:"gestures"},"\\dislike":{code:"\\dislike",icon:"\ud83d\udc4e",category:"gestures"},"\\fuck":{code:"\\fuck",icon:"\ud83d\udd95",category:"gestures"},"\\rock":{code:"\\rock",icon:"\ud83e\udd18",category:"gestures"},"\\ghost":{code:"\\ghost",icon:"\ud83d\udc7b",category:"objects"},"\\alien":{code:"\\alien",icon:"\ud83d\udc7d",category:"objects"},"\\shit":{code:"\\shit",icon:"\ud83d\udca9",category:"objects"},"\\snowman":{code:"\\snowman",icon:"\u2603\ufe0f",category:"objects"},"\\quack":{code:"\\quack",icon:"\ud83e\udd86",category:"..."}},P=function(e){var t=e.appendEmoji,n=Object.keys(T);return c.a.createElement("div",{className:"message__emoji-view"},c.a.createElement("div",{className:"emoji-view__emoji-selector"},n.map((function(e){return c.a.createElement("div",{className:"emoji-selector__emoji",key:e,onClick:function(){return t(T[e].icon)}},c.a.createElement("span",{className:"emoji__icon"},T[e].icon),c.a.createElement("span",{className:"emoji__code"},e))}))))},H=function(e){var t=e.showEmojis,n=Object(a.useState)(""),r=Object(s.a)(n,2),o=r[0],i=r[1],l=Object(a.useContext)(A),u=function(e){if(e.preventDefault(),o){var t=I(o);l.socket.emit("chat",{message:t,handle:l.auth.handle,id:l.socket.id}),i("")}};return c.a.createElement("form",{className:"chat-input"},c.a.createElement("div",{className:"chat-input__message"},c.a.createElement("textarea",{className:"chat-input__message",placeholder:"message... \nshift + enter for newline",name:"message",onChange:function(e){return i(e.target.value)},onKeyPress:function(e){return function(e){i(I(o));var t=window.event.keyCode;if(13===t&&e.shiftKey)i(o);else if(13===t)return u(e);l.socket.emit("typing",l.auth.handle)}(e)},value:o,autoFocus:!0}),c.a.createElement("input",{className:"chat-input__submit",type:"submit",value:"send",onClick:function(e){return u(e)}})),t&&c.a.createElement(P,{appendEmoji:function(e){i((function(t){return t+e}))}}))},M=(n(98),function(e){var t=e.feedback,n=e.toggleEmojis;return c.a.createElement("div",{className:"channel__message-toolbar"},c.a.createElement("div",{className:"message-toolbar__buttons"},c.a.createElement("input",{onClick:function(){return console.log("expand toolbar")},value:"...",type:"button"}),c.a.createElement("input",{onClick:function(){return n()},value:":)",type:"button"})),c.a.createElement(j,{feedback:t}))}),L=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(""),l=Object(s.a)(o,2),u=l[0],m=l[1],d=Object(a.useState)(!1),f=Object(s.a)(d,2),h=f[0],g=f[1],E=Object(a.useContext)(A);Object(a.useEffect)((function(){return E.socket.on("chat",(function(e){return r((function(t){return[].concat(Object(i.a)(t),[e])}))})),function(){return E.socket.off("chat",console.log("stopping chat"))}}),[E.socket]),Object(a.useEffect)((function(){E.socket.on("typing",(function(e){m(e),setTimeout((function(){m(void 0)}),1e3)}))}),[E.socket]);return E.socket?c.a.createElement("div",{className:"channel"},c.a.createElement("h2",null,"main channel"),c.a.createElement(v,{content:n,socketId:E.socket.id}),c.a.createElement(M,{feedback:u,toggleEmojis:function(){return g((function(e){return!e}))}}),c.a.createElement(H,{showEmojis:h})):c.a.createElement("h2",null,"loading...")},W=(n(99),function(){var e=Object(a.useContext)(A).config;return c.a.createElement("div",{className:"preferences__theme-selector"},c.a.createElement("h3",null,"theme selector"),c.a.createElement("button",{onClick:function(){return e.handleTheme().dark()}},"dark"),c.a.createElement("button",{onClick:function(){return e.handleTheme().light()}},"light"),c.a.createElement("button",{onClick:function(){return e.handleTheme().system()}},"system"))}),B=function(){return c.a.createElement("div",{className:"app__preferences"},c.a.createElement("h2",null,"preferences"),c.a.createElement(W,null))},q=function(e){var t=e.authenticated,n=function(e){return t?e:c.a.createElement(d.a,{to:"/login"})};return c.a.createElement(d.d,null,c.a.createElement(d.b,{path:"/login",children:c.a.createElement(D,null)}),c.a.createElement(d.b,{exact:!0,path:"/",children:n(c.a.createElement(L,null))}),c.a.createElement(d.b,{path:"/preferences",children:n(c.a.createElement(B,null))}),c.a.createElement(d.b,{path:"*",children:n(c.a.createElement("h2",null,"error"))}))},A=Object(a.createContext)(),K=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(""),l=Object(s.a)(o,2),d=l[0],f=l[1],h=Object(a.useState)(!1),g=Object(s.a)(h,2),E=g[0],k=g[1],b=Object(a.useState)(null),y=Object(s.a)(b,2),v=y[0],j=y[1],O=Object(a.useState)([]),_=Object(s.a)(O,2),w=_[0],x=_[1],C=Object(a.useState)({palette:"dark",name:"user-dark"}),S=Object(s.a)(C,2),D=S[0],I=S[1],T={auth:{authenticated:n,signIn:function(e){j(u()(N.SOCKET_HOST,{query:{handle:e}})),f(e),r(!0)},signOut:function(){j((function(e){return e.disconnect()})),k(!1),f(null),r(!1)},handle:d},config:{theme:D,handleTheme:function(){return{dark:function(){return I({palette:"dark",name:"user-dark"})},light:function(){return I({palette:"light",name:"user-light"})},system:function(){return I(window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)").matches?{palette:"dark",name:"system-dark"}:{palette:"light",name:"system-light"}:D)}}},menu:E,showMenu:function(){return k(!0)},hideMenu:function(){return k(!1)}},location:{history:w,addToHistory:function(e){x((function(t){return[].concat(Object(i.a)(t),[e])}))},getPreviousRoute:function(){return w.pop()}},user:{handle:d},socket:v};return c.a.createElement(A.Provider,{value:T},c.a.createElement("div",{className:"app theme-".concat(D.palette)},c.a.createElement(m.a,null,c.a.createElement(p,null),c.a.createElement(q,{authenticated:n}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(K,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},47:function(e,t,n){e.exports=n(100)},52:function(e,t,n){},53:function(e,t,n){},83:function(e,t){},86:function(e,t,n){},87:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){},96:function(e,t,n){},97:function(e,t,n){},98:function(e,t,n){},99:function(e,t,n){}},[[47,1,2]]]);
//# sourceMappingURL=main.ffeaec3a.chunk.js.map